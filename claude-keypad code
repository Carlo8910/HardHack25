#include <Wire.h>
#include <LiquidCrystal_I2C.h>

LiquidCrystal_I2C lcd(0x27, 16, 2);

unsigned long lastCheck = 0;

// Time variables
unsigned long year = 2025;
unsigned int month = 2;
unsigned int day = 1;
unsigned int hours = 5;
unsigned int minutes = 8;
unsigned int seconds = 0;

// String display for first row
char timeStr[16];

void setup() {
  // Initialize LCD
  lcd.init();
  lcd.backlight();
  
  // Display initial time
  updateDisplay();
}

void loop() {
  unsigned long currentMillis = millis();

  // Check if 1 minute (60000ms) has passed
  if (currentMillis - lastCheck >= 60000) {
    lastCheck = currentMillis; // Reset timer
    updateTime();              // Update time
    updateDisplay();           // Refresh display
  }
}

void updateTime() {
  minutes++;

  // Handle hour, day, and month rollover
  if (minutes == 60) {
    minutes = 0;
    hours++;
  }
  if (hours == 24) {
    hours = 0;
    day++;
  }
  // Handle simple month-day overflow (does not account for leap years)
  if (day > 30) {  // Adjust if needed for real calendar logic
    day = 1;
    month++;
  }
  if (month > 12) {
    month = 1;
    year++;
  }
}

void updateDisplay() {
  lcd.clear();
  snprintf(timeStr, sizeof(timeStr), "%02u/%02u/%04lu %02u:%02u", month, day, year, hours, minutes);
  lcd.setCursor(0, 0);
  lcd.print(timeStr);
}

